- name: Try with both src and content to ensure it fails
  ansible.builtin.git:
    repo: '{{ repo_format2 }}'
    dest: '{{ checkout_dir }}'
    single_branch: yes
    key_content: "{{ lookup('ansible.builtin.env', 'SSH_KEY', default='nobody') }}"
    key_file: '{{ github_ssh_private_key }}'
    accept_hostkey: yes
  ignore_errors: True
  register: failed_git
  when: github_ssh_private_key is defined

- name: Assert that mutually exclusive parameters key_content & key_file failed
  assert:
    that:
      - failed_git is failed
      - "'mutually exclusive' in failed_git.msg"
  when: github_ssh_private_key is defined
